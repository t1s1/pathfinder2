<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="tabulator/css/tabulator.min.css">
  <style type="text/css">

  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js"></script> -->
  <script type="text/javascript" src="tabulator/js/tabulator.min.js"></script>
  
  <script type="text/javascript" class="init">
    /*
      global $
    */
    $(document).ready(function() {
/*
      $.ajax({
        type: "GET",
        url: "data/AA_courses.csv",
        dataType: "text",
        success: function(data) { processData(data); }
      });
      */
      $.get( "data/AA_courses.csv", function( data ) {processData(data, "course-table")});
      $.get( "data/AA_certs.csv", function( data ) {processData(data, "cert-table")});
    });

    function processData( data, tableName ) {
      var dataRows = data.split(/\r\n|\n/);
      var headers = dataRows[0].split(',');
      var data_arr = [];
      
      function removeQuoteMarks(string) {
        return string.replace(/"/g,'');
      };

      for (var i=1; i<dataRows.length; i++) {
         var data = dataRows[i].split(',');
          if (data.length == headers.length) {
            var row = {};
            for (var j=0; j<headers.length; j++) {
                row[headers[j]] = removeQuoteMarks(data[j]);
            }
            data_arr.push(row);
          }
      };

      var table = new Tabulator("#"+tableName, {
       	height:550, 
       	data:data_arr,
       	layout:"fitColumns", //fit columns to width of table (optional)
       	columns:[ //Define Table Columns
       	 	{title:"ID", field:headers[0], width:150},
       	 	{title:"Name", field:headers[1]}
       	],
       	rowClick:function(e, row){ //trigger an alert message when the row is clicked
       			//alert("Row " + row.getData().id + " Clicked!!!!");
       	},
      });
    }
    
  </script>
</head>

<body>
Pathfinder 2
<div id="course-table"></div>
<div id="cert-table"></div>
</body>

</html>
